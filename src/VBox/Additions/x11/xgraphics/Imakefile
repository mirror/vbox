XCOMM
XCOMM Imakefile for the VBox Linux Additions X.org graphics driver.
XCOMM (Only needed if this module is compiled as part of monolithic Xorg)
XCOMM
XCOMM
XCOMM
XCOMM  Copyright (C) 2006-2007 innotek GmbH
XCOMM 
XCOMM  This file is part of VirtualBox Open Source Edition (OSE), as
XCOMM  available from http://www.virtualbox.org. This file is free software;
XCOMM  you can redistribute it and/or modify it under the terms of the GNU
XCOMM  General Public License (GPL) as published by the Free Software
XCOMM  Foundation, in version 2 as it comes in the "COPYING" file of the
XCOMM  VirtualBox OSE distribution. VirtualBox OSE is distributed in the
XCOMM  hope that it will be useful, but WITHOUT ANY WARRANTY of any kind.
XCOMM 


#define IHaveModules
#include <Server.tmpl>

SRCS = vboxvideo.c vboxutils.c
OBJS = vboxvideo.o vboxutils.o

DRIVER = vboxvideo

#if defined(XF86DriverSDK)
INCLUDES = -I. -I../../include
#else
INCLUDES = -I. -I$(SERVERSRC)/fb -I$(XF86SRC)/xf4bpp -I$(XF86SRC)/xf1bpp \
	-I$(SERVERSRC)/mfb -I$(SERVERSRC)/afb -I$(SERVERSRC)/mi \
	-I$(SERVERSRC)/miext/shadow -I$(SERVERSRC)/render \
	-I$(XF86SRC)/vgahw \
	-I$(XF86COMSRC) -I$(XF86OSSRC) -I$(SERVERSRC)/Xext \
	-I$(SERVERSRC)/include -I$(FONTINCSRC) -I$(XINCLUDESRC)\
	-I$(XF86SRC)/rac -I$(XF86SRC)/ramdac -I$(XF86SRC)/ddc -I$(XF86SRC)/i2c \
	-I$(XF86SRC)/vbe -I$(XF86SRC)/int10 \
	-I$(EXTINCSRC)
#endif

DEFINES = -DVBOX -DIN_RING3 -DXORG_7X
CCOPTIONS += -fno-merge-constants

#if MakeHasPosixVariableSubstitutions
SubdirLibraryRule($(OBJS))
#endif

ModuleObjectRule()

ObjectModuleTarget($(DRIVER),$(OBJS))

InstallVideoObjectModule($(DRIVER),$(MODULEDIR))

DependTarget()

InstallDriverSDKNonExecFile(Imakefile,$(DRIVERSDKDIR)/drivers/vboxvideo)
InstallDriverSDKNonExecFile(vboxvideo.c,$(DRIVERSDKDIR)/drivers/vboxvideo)
InstallDriverSDKNonExecFile(vboxvideo.h,$(DRIVERSDKDIR)/drivers/vboxvideo)
InstallDriverSDKNonExecFile(vboxutils.c,$(DRIVERSDKDIR)/drivers/vboxvideo)

InstallDriverSDKObjectModule($(DRIVER),$(DRIVERSDKMODULEDIR),drivers)
